{{/* layouts/partials/author/hero.html */}}

{{ $avatar := (.Resources.ByType "image").GetMatch "*avatar*" }}

<div class="not-prose mb-10">
  <div class="rounded-2xl bg-white dark:bg-gray-800 shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden">
    <div class="p-6 sm:p-8">
      <div class="flex flex-col gap-6 sm:flex-row sm:items-center">

        {{/* Avatar */}}
        <div class="shrink-0">
          {{ if $avatar }}
            {{ $img := $avatar.Fill "240x240 Center webp" }}
            <img
              src="{{ $img.RelPermalink }}"
              alt="{{ .Title }}"
              width="{{ $img.Width }}"
              height="{{ $img.Height }}"
              loading="lazy"
              class="h-28 w-28 sm:h-32 sm:w-32 rounded-2xl object-cover shadow-sm" />
          {{ else }}
            {{/* graceful fallback if no avatar */}}
            <div class="h-28 w-28 sm:h-32 sm:w-32 rounded-2xl bg-gray-100 dark:bg-gray-700"></div>
          {{ end }}
        </div>

        {{/* Name + Role + quick meta */}}
        <div class="min-w-0 flex-1">
          <h1 class="text-3xl sm:text-4xl font-semibold tracking-tight text-gray-900 dark:text-white">
            {{ .Title }}
          </h1>

          {{ with .Params.role }}
            <p class="mt-2 text-sm sm:text-base text-gray-600 dark:text-gray-300 font-medium">
              {{ . }}
            </p>
          {{ end }}

          {{ with .Params.organizations }}
            <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
              {{ range $i, $org := . }}{{ if $i }}, {{ end }}{{ $org.name | default $org }}{{ end }}
            </p>
          {{ end }}

          {{/* Tags / interests */}}
          {{/* Interests chips (match team-showcase styling). Prefer interests, fall back to tags. */}}
            {{ $chips := slice }}
            {{ with .Params.interests }}
              {{ $chips = . }}
            {{ else }}
              {{ with .Params.tags }}
                {{ $chips = . }}
              {{ end }}
            {{ end }}

            {{ if $chips }}
              <div class="mt-4">
                <div class="flex flex-wrap gap-1">
                  {{ range first 6 $chips }}
                    <span class="inline-block bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs px-2 py-1 rounded">
                      {{ . }}
                    </span>
                  {{ end }}
                </div>
              </div>
            {{ end }}

        </div>

        {{/* Social icons (reuse the same icon partial as team-showcase) */}}
        {{ with .Params.social }}
          <div class="flex flex-row flex-wrap gap-3 sm:justify-end sm:self-start">
            {{ range . }}
              {{ $link := .url | default .link }}
              {{ $scheme := (urls.Parse $link).Scheme }}
              {{ $target := "" }}
              {{ if not $scheme }}
                {{ $link = $link | relLangURL }}
                {{ if eq (path.Ext $link) ".pdf" }}{{ $target = "target=\"_blank\" rel=\"noopener\"" }}{{ end }}
              {{ else if in (slice "http" "https") $scheme }}
                {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
              {{ end }}

              <a href="{{ $link | safeURL }}"
                 {{ $target | safeHTMLAttr }}
                 aria-label="{{ .icon }}"
                 {{ with .label }} title="{{ . }}"{{ end }}
                 class="text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 transition-colors">
                {{ partial "functions/get_icon" (dict "name" .icon "attributes" "class=\"w-5 h-5\"") }}
              </a>
            {{ end }}
          </div>
        {{ end }}

      </div>
    </div>
  </div>
</div>
